EnjuWorldcat
=========

a plugin to search and get WorldCat record.

This plugin is intended for Project Next-L Enju, an open-source integrated library management system, but it may work well with other Rails projects.
http://wiki.github.com/nabeta/next-l

Requirement
=======

- nabeta-wcapi gem: http://github.com/nabeta/wcapi/tree/master
- mloughran-api_cache gem: http://github.com/mloughran/api_cache/tree/master
- your Rails project

Example
=======

Require wcapi and api_cache gems.

config/environment.rb:
-----
config.gem "mloughran-api_cache", :lib => "api_cache"
config.gem "nabeta-wcapi", :lib => "wcapi"
-----

Get your own WorldCat API key and put the following lines in your config/environment.rb.

config/environment.rb:
-----
WORLDCAT_API_KEY = 'your api key'
APICache.start(APICache::MemoryStore)
-----

Include 'enju_worldcat' to your ActiveRecord model.

app/models/manifestation.rb
-----
class Manifestation < ActiveRecord::Base
  enju_worldcat
end
-----

Please note that the instance of this model must have oclc_number or isbn attributes in order to retrieve records. If both oclc_number and isbn are present, oclc_number is used.

$ script/console
>> isbn = '4797340045'
=> "4797340045"
>> record = Manifestation.search_worldcat_by_id(isbn)
>> record[:title]
=> "Tanoshii rubī :"
>> record[:link]
=> "http://www.worldcat.org/oclc/169991343"
>> m = Manifestation.find_by_isbn(isbn)
=> #<Manifestation id: 4180, original_title: "Rubyレシピブック", oclc_number: nil, isbn: "4797340045">
>> m.worldcat_record
=> {:xml=>"<record xmlns='http://www.loc.gov/MARC21/slim'>\n ...", :subtitle=>"ekisupāto no tameno ōyō reshipishū.", :link=>"http://www.worldcat.org/oclc/166747574", :summary=>"", :citation=>"", :title=>"Rubī kukku bukku :", :id=>"166747574", :author=>["Carlson, Lucas.", "Richardson, Leonard,"]}

Copyright (c) 2009 Kosuke Tanabe
